---
description: 
globs: 
alwaysApply: true
---
# ========== æœ€çµ‚æ›´æ–°: 2025-04-23 11:37 (è‡ªå‹•æ›´æ–°: Discoveryãƒ•ã‚§ãƒ¼ã‚ºè¿½åŠ )==================
# ========== æœ€çµ‚æ›´æ–°: 2025-04-27 15:30 (è‡ªå‹•æ›´æ–°: æ±äº¬ã‚¢ã‚»ãƒƒãƒˆã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¯¾å¿œ)==================
# ========== æœ€çµ‚æ›´æ–°: 2025-05-01 12:00 (è‡ªå‹•æ›´æ–°: æ±äº¬ã‚¢ã‚»ãƒƒãƒˆã‚¤ãƒ³ã‚µã‚¤ãƒˆåˆ†ææ©Ÿèƒ½è¿½åŠ )==================
# ========== æœ€çµ‚æ›´æ–°: 2025-05-03 16:45 (è‡ªå‹•æ›´æ–°: Researchãƒ•ã‚§ãƒ¼ã‚ºè¿½åŠ )==================
# 00_master_rules.mdc
# ========== æœ€çµ‚æ›´æ–°: 2025-04-23 14:30 (è‡ªå‹•æ›´æ–°: ä¸å‹•ç”£ç‰¹åŒ–ãƒ«ãƒ¼ãƒ«è¿½åŠ )==================
# CursorãŒæœ€åˆã«èª­ã¿è¾¼ã‚€ã€Œãƒã‚¹ã‚¿ãƒ¼ãƒ«ãƒ¼ãƒ«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚
# - PMBOKé–¢é€£ã®ä¸»è¦ãƒˆãƒªã‚¬ãƒ¼ã‚’ä¸€å…ƒç®¡ç†ã—ã€æƒ…å ±åé›† â†’ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ ã®æµã‚Œã‚’å®šç¾©ã—ã¾ã™ã€‚
# - å®Ÿéš›ã®è³ªå•ãƒªã‚¹ãƒˆã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpmbok_initiating.mdcç­‰ï¼‰ã«è¨˜è¿°ã—ã€
#   ã“ã“ã§ã¯ã€Œå‘¼ã³å‡ºã—ã®æµã‚Œã€ã ã‘ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚
# - "steps" ã®ä¸­ã§å‚ç…§ã—ã¦ã„ã‚‹ "pmbok_initiating.mdc => charter_questions" ã¯ã€
#   pmbok_initiating.mdc ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«å®šç¾©ã•ã‚Œã‚‹ "charter_questions" ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‘¼ã³å‡ºã™ã¨ã„ã†æƒ³å®šã§ã™ã€‚
# - å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å¿…è¦ã«å¿œã˜ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ãƒˆãƒªã‚¬ãƒ¼ã‚’æ‹¡å¼µãƒ»èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

# ----------------
 
path_reference: "basic/pmbok_paths.mdc"

master_triggers:

  #--------------------------------------------
  # 0. æ±ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆï¼ˆFlowç´ æè‡ªå‹•é›†ç´„ï¼‰
  #--------------------------------------------
  - trigger: "(ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ†²ç« |ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼åˆ†æ|WBSä½œæˆ|ãƒªã‚¹ã‚¯è¨ˆç”»)"
    priority: high
    mode: "exclusive"
    steps:
      - name: collect_flow_materials
        action: search_flow_files
        query:
          doc_targets: "{{matched_trigger}}"
          importance_gte: 3
          lookback_days: 30
        store_as: draft_pool
      - name: auto_prefill
        action: prefill_question_answers
        target_questions: "pmbok_*.mdc => *_questions"
        source: "{{draft_pool}}"
      - name: ask_missing
        action: ask_unfilled_questions
        message: "è­°äº‹éŒ²ãªã©ã‹ã‚‰æ‹¾ãˆãªã‹ã£ãŸé …ç›®ã ã‘å›ç­”ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: confirm
        action: confirm
        message: "é›†ç´„ãƒ‡ãƒ¼ã‚¿ï¼‹è¿½åŠ å›ç­”ã§ {{matched_trigger}} ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: create_draft
        action: create_markdown_file
        path: "{{patterns.flow_date}}/draft_{{matched_trigger}}.md"
        template_reference: "pmbok_*.mdc => *_template"
      - name: notify
        action: notify
        message: |
          ğŸ‰ Flow ã«ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ãŸã€‚è¶³ã‚Šãªã„ã¨ã“ã‚ãŒã‚ã‚Œã°è¿½è¨˜ã—ã¦
          ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

  #--------------------------------------------
  # 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ†²ç« ä½œæˆ
  #--------------------------------------------
  - trigger: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ†²ç« |ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ£ãƒ¼ã‚¿ãƒ¼"
    priority: high
    mode: "exclusive"
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_initiating.mdc => charter_questions"
        message: "ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ†²ç« ã€‘ã®ä½œæˆã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚ã™ã¹ã¦å›ç­”ãŒçµ‚ã‚ã‚‹ã¾ã§ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½œæˆã—ã¾ã›ã‚“ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"  # å…¨è³ªå•ãŒå›ç­”ã•ã‚Œã‚‹ or TBDæŒ‡å®šã§å®Œäº†
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆã‚’è¡Œã„ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ†²ç« ã€ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿï¼ˆã¯ã„/ã„ã„ãˆï¼‰"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_charter}}"
        template_reference: "basic/pmbok_initiating.mdc => charter_template"
        message: "ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸ: {{patterns.draft_charter}}\nå¿…è¦ã«å¿œã˜ã¦ä¿®æ­£ãƒ»è¿½è¨˜ã—ãŸå¾Œã€Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç¢ºå®šåæ˜ ã§ãã¾ã™ã€‚"

  #--------------------------------------------
  # 2. ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼åˆ†æ
  #--------------------------------------------
  - trigger: "ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼åˆ†æ|ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ãƒãƒƒãƒ—"
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_initiating.mdc => stakeholder_questions"
        message: "ã€ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼åˆ†æã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å›ç­”ãŒå®Œäº†ã—ãŸã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã‚’ç¢ºèªã—ã¾ã™ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§ã€Œã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼åˆ†æè³‡æ–™ã€ã‚’ãƒ‰ãƒ©ãƒ•ãƒˆä½œæˆã—ã¦ã‚ˆã„ã§ã™ã‹ï¼Ÿï¼ˆã¯ã„/ã„ã„ãˆï¼‰"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_stakeholder}}"
        template_reference: "basic/pmbok_initiating.mdc => stakeholder_template"
        message: "draft_stakeholder_analysis.md ã‚’ä½œæˆã—ã¾ã—ãŸã€‚{{patterns.flow_date}} ãƒ•ã‚©ãƒ«ãƒ€å†…ã«ã‚ã‚Šã¾ã™ã€‚"

  #--------------------------------------------
  # 3. ãƒªã‚¹ã‚¯åˆ†æ / ãƒªã‚¹ã‚¯è¨ˆç”»
  #--------------------------------------------
  - trigger: "ãƒªã‚¹ã‚¯åˆ†æ|ãƒªã‚¹ã‚¯è¨ˆç”»"
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_planning.mdc => risk_questions"
        message: "ã€ãƒªã‚¹ã‚¯åˆ†æã€‘ã®ãŸã‚ã®åˆæœŸæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "ãƒªã‚¹ã‚¯è¨ˆç”»ã‚’ãƒ‰ãƒ©ãƒ•ãƒˆåŒ–ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_risk_plan}}"
        template_reference: "basic/pmbok_planning.mdc => risk_plan_template"
        message: "{{patterns.draft_risk_plan}} ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ã”ç¢ºèªãã ã•ã„ã€‚"

  #--------------------------------------------
  # 4. WBSä½œæˆ
  #--------------------------------------------
  - trigger: "WBSä½œæˆ|ä½œæ¥­åˆ†è§£æ§‹é€ "
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_planning.mdc => wbs_questions"
        message: "WBSã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦äº‹é …ã‚’ãƒ’ã‚¢ãƒªãƒ³ã‚°ã—ã¾ã™ã®ã§ã€å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "WBSãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_wbs}}"
        template_reference: "basic/pmbok_planning.mdc => wbs_template"
        message: "{{patterns.draft_wbs}} ã‚’å‡ºåŠ›ã—ã¾ã—ãŸã€‚è©³ç´°ã‚’è¿½è¨˜ã—ãŸã‚‰Stockã¸ç¢ºå®šã—ã¦ãã ã•ã„ã€‚"

  #--------------------------------------------
  # 4-1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—è¨˜è¿°æ›¸
  #--------------------------------------------
  - trigger: "(ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—è¨˜è¿°æ›¸|Project Scope Statement)"
    steps:
      - name: "start_info_collection"
        action: "call basic/03_pmbok_planning.mdc => project_scope_questions"
        message: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—è¨˜è¿°æ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦äº‹é …ã‚’ãƒ’ã‚¢ãƒªãƒ³ã‚°ã—ã¾ã™ã®ã§ã€å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—è¨˜è¿°æ›¸ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_project_scope}}"
        template_reference: "basic/03_pmbok_planning.mdc => project_scope_template"
        message: "{{patterns.draft_project_scope}} ã‚’å‡ºåŠ›ã—ã¾ã—ãŸã€‚è©³ç´°ã‚’è¿½è¨˜ã—ãŸã‚‰Stockã¸ç¢ºå®šã—ã¦ãã ã•ã„ã€‚"

  #--------------------------------------------
  # 4-2. ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¦æ±‚ä»•æ§˜æ›¸ï¼ˆPRDï¼‰
  #--------------------------------------------
  - trigger: "(ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¦æ±‚ä»•æ§˜æ›¸|PRD|Product Requirements Document)"
    steps:
      - name: "start_info_collection"
        action: "call basic/03_pmbok_planning.mdc => prd_questions"
        message: "ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¦æ±‚ä»•æ§˜æ›¸ï¼ˆPRDï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦äº‹é …ã‚’ãƒ’ã‚¢ãƒªãƒ³ã‚°ã—ã¾ã™ã®ã§ã€å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¦æ±‚ä»•æ§˜æ›¸ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_prd}}"
        template_reference: "basic/03_pmbok_planning.mdc => prd_template"
        message: "{{patterns.draft_prd}} ã‚’å‡ºåŠ›ã—ã¾ã—ãŸã€‚è©³ç´°ã‚’è¿½è¨˜ã—ãŸã‚‰Stockã¸ç¢ºå®šã—ã¦ãã ã•ã„ã€‚"

  #--------------------------------------------
  # 4-3. Design Docï¼ˆè¨­è¨ˆæ–‡æ›¸ï¼‰
  #--------------------------------------------
  - trigger: "(Design Doc|ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‰ãƒƒã‚¯|è¨­è¨ˆæ–‡æ›¸)(ä½œæˆ|)"
    steps:
      - name: "start_info_collection"
        action: "call basic/03_pmbok_planning.mdc => design_doc_questions"
        message: "Design Docï¼ˆè¨­è¨ˆæ–‡æ›¸ï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦äº‹é …ã‚’ãƒ’ã‚¢ãƒªãƒ³ã‚°ã—ã¾ã™ã®ã§ã€å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "Design Docã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_design_doc}}"
        template_reference: "basic/03_pmbok_planning.mdc => design_doc_template"
        message: "{{patterns.draft_design_doc}} ã‚’å‡ºåŠ›ã—ã¾ã—ãŸã€‚è©³ç´°ã‚’è¿½è¨˜ã—ãŸã‚‰Stockã¸ç¢ºå®šã—ã¦ãã ã•ã„ã€‚"

  #--------------------------------------------
  # 5. ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚´ãƒ¼ãƒ«ä½œæˆ
  #--------------------------------------------
  - trigger: "ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚´ãƒ¼ãƒ«|Sprint Goal"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_executing.mdc => sprint_goal_questions"
        message: "ã€ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚´ãƒ¼ãƒ«ã€‘ä½œæˆã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation" 
        action: "confirm"
        message: "å…¥åŠ›å†…å®¹ã§ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚´ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.flow_private_date}}/draft_sprint_goal_{{sprint_number}}.md"
        template_reference: "basic/pmbok_executing.mdc => sprint_goal_template"
        message: "ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚´ãƒ¼ãƒ«ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚å†…å®¹ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚"
      - name: notify
        action: notify
        message: |
          ã‚¹ãƒ—ãƒªãƒ³ãƒˆã‚´ãƒ¼ãƒ«ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ Flow ã«ç”Ÿæˆã—ã¾ã—ãŸã€‚ä¿®æ­£å¾Œã€
          ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨ Stock/projects/{{project_id}}/documents/4_executing/sprint_goals/ ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

  #--------------------------------------------
  # 6. ä¼šè­°è­°äº‹éŒ²
  #--------------------------------------------
  - trigger: "è­°äº‹éŒ²|ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒãƒ¼ãƒˆ"
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_executing.mdc => meeting_minutes_questions"
        message: "ä¼šè­°è­°äº‹éŒ²ã‚’ä½œæˆã—ã¾ã™ã€‚ä¼šè­°ã®åŸºæœ¬æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "è­°äº‹éŒ²ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_minutes}}"
        template_reference: "basic/pmbok_executing.mdc => meeting_minutes_template"
        message: "{{patterns.draft_minutes}} ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚"

  #--------------------------------------------
  # 7. å¤‰æ›´è¦æ±‚
  #--------------------------------------------
  - trigger: "å¤‰æ›´è¦æ±‚|ãƒã‚§ãƒ³ã‚¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆ"
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_monitoring.mdc => change_request_questions"
        message: "å¤‰æ›´è¦æ±‚ã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "å¤‰æ›´è¦æ±‚æ›¸ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "Flow/Private/{{today}}/draft_change_request.md"
        template_reference: "basic/pmbok_monitoring.mdc => change_request_template"
        message: "draft_change_request.md ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œã«æ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚"

  #--------------------------------------------
  # 8. æ•™è¨“è¨˜éŒ² (Lessons Learned)
  #--------------------------------------------
  - trigger: "æ•™è¨“è¨˜éŒ²|ãƒ¬ãƒƒã‚¹ãƒ³ãƒ©ãƒ¼ãƒ‹ãƒ‰|ãƒ¬ãƒƒã‚¹ãƒ³ãšã‚‰ãƒ¼ã‚“ã©"
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_closing.mdc => lessons_learned_questions"
        message: "æ•™è¨“è¨˜éŒ²ï¼ˆLessons Learnedï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚ã„ãã¤ã‹è³ªå•ã‚’è¡Œã„ã¾ã™ã®ã§ã€å›ç­”ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "æ•™è¨“è¨˜éŒ²ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "Flow/Private/{{today}}/draft_lessons_learned.md"
        template_reference: "basic/pmbok_closing.mdc => lessons_learned_template"
        message: "draft_lessons_learned.md ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†å¾Œã®æŒ¯ã‚Šè¿”ã‚Šã«ãŠä½¿ã„ãã ã•ã„ã€‚"

#--------------------------------------------
# 9. ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–
#--------------------------------------------

    ```yaml
    trigger: 
    pattern: "(ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–|backlogåˆæœŸåŒ–|ãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–)(ã—ã¦|ãŠé¡˜ã„)"
    priority: 100
    ```

    ```yaml
    action:
    type: function
    function: backlog_initialization
    params:
        template_path: "{{patterns.backlog_init_template}}"
        wbs_path: "{{patterns.wbs_path}}"
    ```

    ```javascript
    function backlog_initialization(params) {
    console.log("ãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–‹å§‹ã—ã¾ã™");
    
    // Planning ãƒ•ã‚§ãƒ¼ã‚ºã®ãƒ«ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™
    return {
        type: "call_rule",
        rule: "03_pmbok_planning.mdc",
        function: "backlog_init",
        params: {
        template_path: params.template_path,
        wbs_path: params.wbs_path
        }
    };
    }
    ```

  - trigger: "(ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–|backlogåˆæœŸåŒ–|ãƒãƒƒã‚¯ãƒ­ã‚°åˆæœŸåŒ–)(ã—ã¦|ãŠé¡˜ã„)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/pmbok_planning.mdc => backlog_questions"
        message: "ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒƒã‚¯ãƒ­ã‚°ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚å¿…è¦æƒ…å ±ã‚’åé›†ã—ã¾ã™ã®ã§å›ç­”ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªæƒ…å ±ã‚’ã™ã¹ã¦åé›†ã™ã‚‹ã¾ã§ãŠå¾…ã¡ãã ã•ã„ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§ãƒãƒƒã‚¯ãƒ­ã‚°YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_backlog_yaml"
        action: "create_file"
        path: "{{patterns.backlog_yaml}}"
        template_reference: "basic/pmbok_planning.mdc => backlog_yaml_template"
        message: "backlog.yamlã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "create_epics_yaml" 
        action: "create_file"
        path: "{{patterns.epics_yaml}}"
        template_reference: "basic/pmbok_planning.mdc => epics_yaml_template"
        message: "epics.yamlã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "validate_backlog_yaml"
        action: "execute_shell"
        command: "python {{patterns.backlog_validate_script}} {{patterns.backlog_yaml}}"
        message: "ãƒãƒƒã‚¯ãƒ­ã‚°YAMLã®æ¤œè¨¼ã‚’è¡Œã„ã¾ã™ã€‚"
      - name: "notify_completion"
        action: "notify"
        message: |
          ãƒãƒƒã‚¯ãƒ­ã‚°ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸã€‚backlog.yamlã¨epics.yamlãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚
          ã“ã‚Œã‚’åŸºã«ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”Ÿæˆã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚
          å†…å®¹ã‚’ç¢ºèªã€ä¿®æ­£ã—ãŸå¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockã¸åæ˜ ã•ã‚Œã¾ã™ã€‚

#--------------------------------------------
# 10. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”Ÿæˆ
#--------------------------------------------
  - trigger: "(ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”Ÿæˆ|ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç”Ÿæˆ|storyç”Ÿæˆ)(ã—ã¦|ãŠé¡˜ã„)"
    priority: high
    steps:
      - name: "run_yaml_to_stories_script"
        action: "execute_shell"
        command: "python /Users/daisukemiyata/{{root}}/scripts/yaml_to_stories.py {{patterns.backlog_yaml}} {{patterns.stories_dir}}"
        message: "backlog.yamlã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚"
      - name: "notify_generation_complete"
        action: "notify"
        message: |
          ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚
          {{patterns.stories_dir}}ã«ç”Ÿæˆã•ã‚ŒãŸã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
          ä¿®æ­£å¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã§ Stock/backlog/stories ã¸ç§»å‹•ã§ãã¾ã™ã€‚



#--------------------------------------------
# 11. ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ä½œæˆ  â˜…NEW
#--------------------------------------------
  - trigger: "(ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ä½œæˆ|ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—|ãƒªãƒªãƒ¼ã‚¹è¨ˆç”»)"
    priority: high
    steps:
      # â‘  æ—¢å­˜è³‡æ–™ã‹ã‚‰è‡ªå‹•ä¸‹æ›¸ã
      - collect_flow_materials:
          query:
            doc_targets: "ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—|roadmap"
            lookback_days: 30
          store_as: roadmap_pool
      - prefill_question_answers:
          target_questions: "pmbok_planning.mdc => roadmap_questions"
          source: "{{roadmap_pool}}"
      # â‘¡ ä¸è¶³è³ªå•
      - ask_unfilled_questions:
          message: "ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã«å¿…è¦ãªè¿½åŠ æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
      # â‘¢ ç¢ºèª
      - confirm: "å…¥åŠ›å†…å®¹ã§ ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ Flow ã«ç”Ÿæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      # â‘£ ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆ
      - create_markdown_file:
          path: "{{patterns.draft_roadmap}}"
          template_reference: "basic/pmbok_planning.mdc => roadmap_template"
      - notify: |
          {{patterns.draft_roadmap}} ã‚’ä½œæˆã—ã¾ã—ãŸã€‚å¿…è¦ã«å¿œã˜ä¿®æ­£å¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã§ Stock ã«ç§»å‹•ã—ã¾ã™ã€‚

#--------------------------------------------
# 12. Sprint Review è‡ªå‹•ç”Ÿæˆ (æ¯é€±é‡‘æ›œ 17:00 or æ‰‹å‹•)
#--------------------------------------------
  - trigger: "(ã‚¹ãƒ—ãƒªãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼ä½œæˆ|Sprint Review)"
    priority: high
    steps:
      # A) Flow å†…ã®æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•é›†ç´„
      - collect_flow_materials:
          query:
            glob: "{{patterns.daily_tasks_glob}}"
            lookback_days: 14
          store_as: daily_pool

      # B) å®Œäº†ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼ã‚¤ãƒ³ãƒšãƒ‡ã‚£ãƒ¡ãƒ³ãƒˆæŠ½å‡º
      - transform:
          source: "{{daily_pool}}"
          script: |
            # å…¥åŠ›: list[str] (= æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ md)
            import re, yaml, textwrap, json, itertools, pathlib
            done = set(); imped = []
            for path,txt in source:
                for line in txt.splitlines():
                    m = re.match(r"- \[x\] (US-[0-9]+)", line, re.I)
                    if m: done.add(m.group(1))
                    if "âš " in line or "impediment" in line.lower():
                        imped.append(line.lstrip("- "))

            print(json.dumps({
              "demo_items": "\n".join(f"- {d}" for d in sorted(done)),
              "impediments": "\n".join(f"- {i}" for i in imped)
            }))
          store_as: auto_data

      # C) è³ªå•ãƒ—ãƒªãƒ•ã‚£ãƒ«
      - prefill_question_answers:
          target_questions: "pmbok_executing.mdc => sprint_review_questions"
          source: "{{auto_data}}"

      # D) ä¸è¶³è³ªå•ãƒ’ã‚¢ãƒªãƒ³ã‚°
      - ask_unfilled_questions:
          message: "Sprint Review ã«ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"

      # E) ç¢ºèªã—ã¦ãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆ
      - confirm: "å…¥åŠ›ï¼‹è‡ªå‹•é›†ç´„ã§ Sprint Review ã‚’ Flow ã«ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - create_markdown_file:
          path: "{{patterns.draft_review}}"
          template_reference: "basic/pmbok_executing.mdc => sprint_review_template"
      - notify: |
          {{patterns.draft_review}} ã‚’ç”Ÿæˆã—ã¾ã—ãŸã€‚
          ä¿®æ­£å¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã§ Stock/sprints/{{sprint_id}} ã¸ç§»å‹•ã—ã¾ã™ã€‚

#--------------------------------------------
# 13. ã‚¿ã‚¹ã‚¯ç®¡ç†
#--------------------------------------------
  - trigger: "(ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯|æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ä½œæˆ|Daily tasks)"
    call_rule: "07_task_management.mdc => daily_tasks"
  - trigger: "(é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼|Weekly review)"
    call_rule: "07_task_management.mdc => weekly_review"
  - trigger: "(Sync|WBSã¨åŒæœŸ|ãƒªã‚¹ã‚¯ãƒ­ã‚°ã¨åŒæœŸ)"
    call_rule: "07_task_management.mdc => sync_with_artifacts"



#--------------------------------------------
# 14. Discovery ãƒ•ã‚§ãƒ¼ã‚º
#--------------------------------------------
- trigger: "(ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªãƒ¼|Discovery)"
priority: high
steps:
    - message: |
        Discoveryï¼ˆç™ºè¦‹ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ä»¥ä¸‹ã®æˆæœç‰©ã‚’ä½œæˆã§ãã¾ã™ï¼š
        - **Assumption Mapï¼ˆå‰ææ¡ä»¶ãƒãƒƒãƒ—ï¼‰**ï¼šã€Œä»®èª¬ãƒãƒƒãƒ—ã€ã¨å…¥åŠ›
        - **Personaï¼ˆãƒšãƒ«ã‚½ãƒŠï¼‰**ï¼šã€Œãƒšãƒ«ã‚½ãƒŠä½œæˆã€ã¨å…¥åŠ›
        - **Problem Statementï¼ˆèª²é¡Œå®šç¾©ï¼‰**ï¼šã€Œèª²é¡Œå®šç¾©ã€ã¨å…¥åŠ›
        - **User Journey Mapï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒƒãƒ—ï¼‰**ï¼šã€Œã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒƒãƒ—ã€ã¨å…¥åŠ›
        - **Solution Definitionï¼ˆã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©ï¼‰**ï¼šã€Œã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©ã€ã¨å…¥åŠ›
        - **Validation Planï¼ˆæ¤œè¨¼è¨ˆç”»ï¼‰**ï¼šã€Œæ¤œè¨¼è¨ˆç”»ã€ã¨å…¥åŠ›
        - **UX Research Overviewï¼ˆUXãƒªã‚µãƒ¼ãƒèª¿æŸ»æ¦‚è¦ï¼‰**ï¼šã€ŒUXãƒªã‚µãƒ¼ãƒã€ã¨å…¥åŠ›
        - **Interview Guideï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨­è¨ˆï¼‰**ï¼šã€Œã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨­è¨ˆã€ã¨å…¥åŠ›
        - **Recruiting Planï¼ˆãƒªã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨ˆç”»ï¼‰**ï¼šã€Œãƒªã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ã¨å…¥åŠ›
        - **Interview Analysisï¼ˆã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æï¼‰**ï¼šã€Œã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æã€ã¨å…¥åŠ›
        - **Research Summaryï¼ˆãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ï¼‰**ï¼šã€Œãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ã€ã¨å…¥åŠ›
        - **Hypothesis Backlogï¼ˆä»®èª¬ãƒãƒƒã‚¯ãƒ­ã‚°ï¼‰**ï¼šã€Œä»®èª¬ãƒãƒƒã‚¯ãƒ­ã‚°ã€ã¨å…¥åŠ›

#--------------------------------------------
# Discovery: Assumption Map
#--------------------------------------------
- trigger: "(ä»®èª¬ãƒãƒƒãƒ—|Assumption Map)"
priority: high
steps:
  - call basic/02_pmbok_discovery.mdc => assumption_questions
  - wait_for_all_answers
  - confirm: "Assumption Mapï¼ˆå‰ææ¡ä»¶ãƒãƒƒãƒ—ï¼‰ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
  - create_markdown_file:
      path: "{{patterns.draft_assumption}}"
      template_reference: "02_pmbok_discovery.mdc => assumption_template"

#--------------------------------------------
# Discovery: Persona
#--------------------------------------------
- trigger: "(ãƒšãƒ«ã‚½ãƒŠä½œæˆ|Persona)"
priority: high
steps:
  - call basic/02_pmbok_discovery.mdc => persona_questions
  - wait_for_all_answers
  - confirm: "ãƒšãƒ«ã‚½ãƒŠã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
  - create_markdown_file:
      path: "{{patterns.draft_persona}}"
      template_reference: "02_pmbok_discovery.mdc => persona_template"

#--------------------------------------------
# Discovery: Problem Statement
#--------------------------------------------
- trigger: "(èª²é¡Œå®šç¾©|Problem Statement)"
priority: high
steps:
  - call basic/02_pmbok_discovery.mdc => problem_questions
  - wait_for_all_answers
  - confirm: "èª²é¡Œå®šç¾©æ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
  - create_markdown_file:
      path: "{{patterns.draft_problem}}"
      template_reference: "02_pmbok_discovery.mdc => problem_template"

#--------------------------------------------
# Discovery: User Journey Map
#--------------------------------------------
- trigger: "(ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒƒãƒ—|User Journey Map|ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒƒãƒ—)"
priority: high
steps:
  - call basic/02_pmbok_discovery.mdc => journey_map_questions
  - wait_for_all_answers
  - confirm: "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒãƒƒãƒ—ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
  - create_markdown_file:
      path: "{{patterns.flow_private_date}}/draft_user_journey_map.md"
      template_reference: "02_pmbok_discovery.mdc => journey_map_template"

#--------------------------------------------
# Discovery: Solution Definition
#--------------------------------------------
- trigger: "(ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©|Solution Definition)"
priority: high
steps:
  - call basic/02_pmbok_discovery.mdc => solution_definition_questions
  - wait_for_all_answers
  - confirm: "ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©æ›¸ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
  - create_markdown_file:
      path: "{{patterns.flow_date}}/draft_solution_definition.md"
      template_reference: "02_pmbok_discovery.mdc => solution_definition_template"

#--------------------------------------------
# Discovery: Validation Plan
#--------------------------------------------
- trigger: "(æ¤œè¨¼è¨ˆç”»|Validation Plan)"
  priority: high
  steps:
    - call basic/02_pmbok_discovery.mdc => validation_plan_questions
    - wait_for_all_answers
    - confirm: "æ¤œè¨¼è¨ˆç”»ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_private_date}}/draft_validation_plan.md"
        template_reference: "02_pmbok_discovery.mdc => validation_plan_template"

#--------------------------------------------
# Discovery: UXãƒªã‚µãƒ¼ãƒèª¿æŸ»æ¦‚è¦
#--------------------------------------------
- trigger: "(UXãƒªã‚µãƒ¼ãƒ|ãƒ¦ãƒ¼ã‚¶ãƒ¼èª¿æŸ»|UXèª¿æŸ»|ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚µãƒ¼ãƒ)"
  priority: high
  steps:
    - call basic/02_pmbok_discovery.mdc => ux_research_overview_questions
    - wait_for_all_answers
    - confirm: "UXãƒªã‚µãƒ¼ãƒèª¿æŸ»æ¦‚è¦ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_private_date}}/draft_ux_research_overview.md"
        template_reference: "02_pmbok_discovery.mdc => ux_research_overview_template"
        
#--------------------------------------------
# Discovery: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨­è¨ˆ
#--------------------------------------------
- trigger: "(ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨­è¨ˆ|ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è³ªå•|è³ªå•è¡¨ä½œæˆ|ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚¬ã‚¤ãƒ‰)"
  priority: high
  steps:
    - call basic/02_pmbok_discovery.mdc => interview_design_questions
    - wait_for_all_answers
    - confirm: "ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚¬ã‚¤ãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_private_date}}/draft_interview_guide.md"
        template_reference: "02_pmbok_discovery.mdc => interview_guide_template"

#--------------------------------------------
# Discovery: ãƒªã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨ˆç”»
#--------------------------------------------
- trigger: "(ãƒªã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°|ãƒ¦ãƒ¼ã‚¶ãƒ¼å‹Ÿé›†|è¢«é¨“è€…å‹Ÿé›†|å‚åŠ è€…å‹Ÿé›†)"
  priority: high
  steps:
    - call basic/02_pmbok_discovery.mdc => recruiting_plan_questions
    - wait_for_all_answers
    - confirm: "ãƒªã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨ˆç”»ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_private_date}}/draft_recruiting_plan.md"
        template_reference: "02_pmbok_discovery.mdc => recruiting_plan_template"

#--------------------------------------------
# Discovery: ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æï¼ˆå€‹åˆ¥ï¼‰
#--------------------------------------------
- trigger: "(ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æ|ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼çµæœ|ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜éŒ²|å€‹åˆ¥åˆ†æ)"
  priority: high
  steps:
    - call basic/02_pmbok_discovery.mdc => interview_analysis_questions
    - wait_for_all_answers
    - confirm: "ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æï¼ˆå€‹åˆ¥ï¼‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_private_date}}/draft_interview_analysis_{{participant_id}}.md"
        template_reference: "02_pmbok_discovery.mdc => interview_analysis_template"
    - notify: |
        ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼åˆ†æãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        {{patterns.flow_private_date}}/draft_interview_analysis_{{participant_id}}.md
        
        ä¿®æ­£å¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

#--------------------------------------------
# Discovery: ãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ï¼ˆå…¨ä½“åˆ†æï¼‰
#--------------------------------------------
- trigger: "(ãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼|èª¿æŸ»ã‚µãƒãƒªãƒ¼|å…¨ä½“åˆ†æ|ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã¾ã¨ã‚)"
  priority: high
  steps:
    - call basic/02_pmbok_discovery.mdc => research_summary_questions
    - wait_for_all_answers
    - confirm: "ãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ï¼ˆå…¨ä½“åˆ†æï¼‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_private_date}}/draft_research_summary.md"
        template_reference: "02_pmbok_discovery.mdc => research_summary_template"
    - notify: |
        ãƒªã‚µãƒ¼ãƒã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        {{patterns.flow_private_date}}/draft_research_summary.md
        
        ä¿®æ­£å¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

#--------------------------------------------
# Discovery: Hypothesis Backlog
#--------------------------------------------
- trigger: "(ä»®èª¬ãƒãƒƒã‚¯ãƒ­ã‚°|Hypothesis)"
priority: high
steps:
  - call basic/02_pmbok_discovery.mdc => hypothesis_questions
  - wait_for_all_answers
  - confirm: "ä»®èª¬ãƒãƒƒã‚¯ãƒ­ã‚°ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
  - create_markdown_file:
      path: "{{patterns.draft_hypothesis}}"
      template_reference: "02_pmbok_discovery.mdc => hypothesis_template"

#--------------------------------------------
# Flow Assist ãƒ•ã‚§ãƒ¼ã‚º
#--------------------------------------------
- trigger: "(ã‚¢ã‚¤ãƒ‡ã‚£ã‚¢ç™ºæ•£)"
  priority: high
  steps:
    - call basic/03_pmbok_flow_assist.mdc => flow_assist_questions
    - wait_for_all_answers
    - confirm: "Flow Assist ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - create_markdown_file:
        path: "{{patterns.flow_date}}/draft_flow_assist.md"
        template_reference: "03_pmbok_flow_assist.mdc => flow_assist_template"

#--------------------------------------------
# è£œè¶³: å…¨ä½“è¨­å®šã‚„å…±é€šãƒ¡ã‚¿æƒ…å ±ãªã©
#--------------------------------------------
settings:
  # ãƒ«ãƒ¼ãƒ«å…¨ä½“ã«é©ç”¨ã™ã‚‹å…±é€šè¨­å®šä¾‹
  # ä¾‹: (ã‚ãã¾ã§å‚è€ƒã€å®Ÿéš›ã®Cursorç’°å¢ƒã«åˆã‚ã›ã¦æ›¸ãæ›¿ãˆã¦ãã ã•ã„)
  date_format: "YYYY-MM-DD"
  language: "ja"
  default_actions:
    - "information_collection"
    - "confirm_creation"
    - "create_file_in_flow"
  error_handling:
    unrecognized_trigger: "ã™ã¿ã¾ã›ã‚“ã€ãã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«å¯¾å¿œã™ã‚‹ãƒ«ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
    partial_answer: "ä¸€éƒ¨å›ç­”ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚TBDã§ã‚ˆã‘ã‚Œã°åŸ‹ã‚ã¾ã™ãŒã€ã©ã†ã—ã¾ã™ã‹ï¼Ÿ"

notes:
  - "ã“ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ«ãƒ¼ãƒ«ã§ä½¿ã‚ã‚Œã‚‹ pmbok_initiating.mdc, pmbok_planning.mdc ç­‰ã«å„ãƒ•ã‚§ãƒ¼ã‚ºã®è³ªå•ãƒªã‚¹ãƒˆãƒ»ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’è¨˜è¼‰"
  - "flow_to_stock_rules.mdc ç­‰ã§ãƒ‰ãƒ©ãƒ•ãƒˆâ†’ç¢ºå®šåæ˜ ã®æ‰‹é †ã‚’å®šç¾©ã™ã‚‹"
  - "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé€”ä¸­ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«/ä¿ç•™ã—ãŸå ´åˆã®å‡¦ç†ã‚’ã©ã†ã™ã‚‹ã‹ã€å¿…è¦ãªã‚‰ 'cancel' ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹"
  - "project_id ã‚„ today ãªã©ã®å¤‰æ•°ã¯å‘¼ã³å‡ºã—æ™‚ã«ã‚»ãƒƒãƒˆã•ã‚Œã€Cursor ãŒè‡ªå‹•çš„ã«è§£æ±ºã—ã¾ã™"
  - "ä½¿ç”¨ä¾‹ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID ã¯ AIPM-PMBOK ã®ã‚ˆã†ã«ã”æŒ‡å®šãã ã•ã„"



#--------------------------------------------
# Research ãƒ•ã‚§ãƒ¼ã‚º
#--------------------------------------------
- trigger: "(ãƒªã‚µãƒ¼ãƒ|Research)"
  priority: high
  steps:
    - message: |
        Researchï¼ˆãƒªã‚µãƒ¼ãƒï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ä»¥ä¸‹ã®æˆæœç‰©ã‚’ä½œæˆã§ãã¾ã™ï¼š
        - **é¡§å®¢èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ**ï¼šã€Œé¡§å®¢èª¿æŸ»ã€ã¨å…¥åŠ›
        - **ç«¶åˆèª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ**ï¼šã€Œç«¶åˆèª¿æŸ»ã€ã¨å…¥åŠ›
        - **ç·åˆãƒ‡ã‚¹ã‚¯ãƒªã‚µãƒ¼ãƒ**ï¼šã€Œãƒ‡ã‚¹ã‚¯ãƒªã‚µãƒ¼ãƒã€ã¨å…¥åŠ›

#--------------------------------------------
# Research: é¡§å®¢èª¿æŸ»
#--------------------------------------------
- trigger: "(é¡§å®¢èª¿æŸ»|Customer Research)"
  priority: high
  steps:
    - name: "collect_research_requirements"
      action: "ask_questions"
      questions:
        - key: "project_name"
          question: "èª¿æŸ»å¯¾è±¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          required: true
        - key: "target_audience"
          question: "èª¿æŸ»ã—ãŸã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ã‚’å…·ä½“çš„ã«æ•™ãˆã¦ãã ã•ã„"
          required: true
        - key: "research_topics"
          question: "é¡§å®¢èª¿æŸ»ã§ç‰¹ã«çŸ¥ã‚ŠãŸã„å†…å®¹ã‚„ãƒˆãƒ”ãƒƒã‚¯ã‚’æ•™ãˆã¦ãã ã•ã„ï¼ˆè¤‡æ•°å¯ã€ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰"
          required: true
        - key: "industry_context"
          question: "æ¥­ç•Œã‚„å¸‚å ´ã®èƒŒæ™¯æƒ…å ±ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„"
          required: false
      store_as: "research_params"
    - name: "confirm_research"
      action: "confirm"
      message: "ä»¥ä¸‹ã®å†…å®¹ã§é¡§å®¢èª¿æŸ»ã‚’å®Ÿæ–½ã—ã¾ã™ï¼š\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {{research_params.project_name}}\nã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {{research_params.target_audience}}\nèª¿æŸ»ãƒˆãƒ”ãƒƒã‚¯: {{research_params.research_topics}}\n\nWebæ¤œç´¢ã‚’é–‹å§‹ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - name: "web_research_audience"
      action: "web_search"
      search_term: "{{research_params.target_audience}} é¡§å®¢ç‰¹æ€§ æ¶ˆè²»è€…è¡Œå‹• ãƒ‹ãƒ¼ã‚º æœ€æ–°å‹•å‘"
      explanation: "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚ªãƒ¼ãƒ‡ã‚£ã‚¨ãƒ³ã‚¹ã«ã¤ã„ã¦ã®æœ€æ–°æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "audience_data"
    - name: "web_research_topics"
      action: "web_search"
      search_term: "{{research_params.target_audience}} {{research_params.research_topics}} æ¶ˆè²»è€…èª¿æŸ» å¸‚å ´èª¿æŸ» æœ€æ–°"
      explanation: "æŒ‡å®šã•ã‚ŒãŸãƒˆãƒ”ãƒƒã‚¯ã«é–¢ã™ã‚‹é¡§å®¢èª¿æŸ»æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "topic_data"
    - name: "web_research_behavior"
      action: "web_search"
      search_term: "{{research_params.target_audience}} è³¼è²·è¡Œå‹• æ„æ€æ±ºå®šãƒ—ãƒ­ã‚»ã‚¹ é¡§å®¢ä½“é¨“ {{research_params.industry_context}}"
      explanation: "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®è³¼è²·è¡Œå‹•ã‚„æ„æ€æ±ºå®šãƒ—ãƒ­ã‚»ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "behavior_data"
    - name: "analyze_web_research"
      action: "analyze"
      data: ["{{audience_data}}", "{{topic_data}}", "{{behavior_data}}"]
      instructions: "åé›†ã—ãŸWebæ¤œç´¢ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ä¸»è¦ãªæ´å¯Ÿã€å‚¾å‘ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠ½å‡ºã—ã¾ã™"
      store_as: "analyzed_results"
    - name: "create_draft"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/draft_customer_research.md"
      template_reference: "basic/02_pmbok_research.mdc => customer_research_template"
      data_mapping:
        project_name: "{{research_params.project_name}}"
        target_audience: "{{research_params.target_audience}}"
        research_period: "{{today}}"
        research_method: "Webæ¤œç´¢ã«ã‚ˆã‚‹äºŒæ¬¡èª¿æŸ»"
        research_themes: "{{research_params.research_topics | split: ','}}"
        customer_insights: "{{analyzed_results.insights}}"
        customer_behavior: "{{analyzed_results.behavior}}"
        customer_needs: "{{analyzed_results.needs}}"
        customer_segments: "{{analyzed_results.segments}}"
    - name: "notify_completion"
      action: "notify"
      message: |
        é¡§å®¢èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        {{patterns.flow_date}}/draft_customer_research.md
        
        Webæ¤œç´¢çµæœã‚’ã‚‚ã¨ã«ä¸»è¦ãªé¡§å®¢ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚
        å†…å®¹ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ç·¨é›†å¾Œã€ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

#--------------------------------------------
# Research: ç«¶åˆèª¿æŸ»
#--------------------------------------------
- trigger: "(ç«¶åˆèª¿æŸ»|Competitor Research)"
  priority: high
  steps:
    - name: "collect_research_requirements"
      action: "ask_questions"
      questions:
        - key: "project_name"
          question: "èª¿æŸ»å¯¾è±¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          required: true
        - key: "product_service"
          question: "è‡ªç¤¾ã®è£½å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦ã‚’ç°¡æ½”ã«æ•™ãˆã¦ãã ã•ã„"
          required: true
        - key: "main_competitors"
          question: "ä¸»ãªç«¶åˆä¼æ¥­ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°å¯ï¼‰"
          required: false
        - key: "research_focus"
          question: "ç«¶åˆèª¿æŸ»ã§ç‰¹ã«çŸ¥ã‚ŠãŸã„å´é¢ã‚’æ•™ãˆã¦ãã ã•ã„ï¼ˆä¾‹ï¼šä¾¡æ ¼æˆ¦ç•¥ã€ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‰‹æ³•ã€è£½å“æ©Ÿèƒ½ãªã©ï¼‰"
          required: true
      store_as: "research_params"
    - name: "confirm_research"
      action: "confirm"
      message: "ä»¥ä¸‹ã®å†…å®¹ã§ç«¶åˆèª¿æŸ»ã‚’å®Ÿæ–½ã—ã¾ã™ï¼š\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {{research_params.project_name}}\nè‡ªç¤¾è£½å“/ã‚µãƒ¼ãƒ“ã‚¹: {{research_params.product_service}}\nä¸»ãªç«¶åˆ: {{research_params.main_competitors}}\nèª¿æŸ»ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: {{research_params.research_focus}}\n\nWebæ¤œç´¢ã‚’é–‹å§‹ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - name: "web_research_competitors"
      action: "web_search"
      search_term: "{{research_params.product_service}} æ¥­ç•Œ ä¸»è¦ä¼æ¥­ ç«¶åˆ ãƒãƒ¼ã‚±ãƒƒãƒˆã‚·ã‚§ã‚¢ æœ€æ–°"
      explanation: "æ¥­ç•Œã®ä¸»è¦ç«¶åˆä¼æ¥­ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "competitors_data"
    - name: "web_research_specific_competitors"
      action: "web_search"
      search_term: "{{research_params.main_competitors}} {{research_params.research_focus}} æˆ¦ç•¥ ç‰¹å¾´ æœ€æ–°å‹•å‘"
      condition: "research_params.main_competitors"
      explanation: "æŒ‡å®šã•ã‚ŒãŸç«¶åˆä¼æ¥­ã«ã¤ã„ã¦ã®è©³ç´°æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "specific_competitors_data"
    - name: "web_research_market_trends"
      action: "web_search"
      search_term: "{{research_params.product_service}} å¸‚å ´å‹•å‘ æ¥­ç•Œãƒˆãƒ¬ãƒ³ãƒ‰ æœ€æ–°æŠ€è¡“ å°†æ¥äºˆæ¸¬"
      explanation: "æ¥­ç•Œã®å¸‚å ´å‹•å‘ã¨æœ€æ–°ãƒˆãƒ¬ãƒ³ãƒ‰ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "market_trends_data"
    - name: "web_research_competitive_strategies"
      action: "web_search"
      search_term: "{{research_params.product_service}} æ¥­ç•Œ {{research_params.research_focus}} ç«¶äº‰æˆ¦ç•¥ å·®åˆ¥åŒ–è¦å› "
      explanation: "ç«¶åˆã®æˆ¦ç•¥ã¨å·®åˆ¥åŒ–è¦å› ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "strategies_data"
    - name: "analyze_web_research"
      action: "analyze"
      data: ["{{competitors_data}}", "{{specific_competitors_data}}", "{{market_trends_data}}", "{{strategies_data}}"]
      instructions: "åé›†ã—ãŸWebæ¤œç´¢ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ç«¶åˆä¼æ¥­ã®ä¸»è¦ç‰¹æ€§ã€å¸‚å ´ãƒã‚¸ã‚·ãƒ§ãƒ³ã€æˆ¦ç•¥ã€å¼·ã¿ãƒ»å¼±ã¿ã‚’æŠ½å‡ºã—ã¾ã™"
      store_as: "analyzed_results"
    - name: "create_draft"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/draft_competitor_research.md"
      template_reference: "basic/02_pmbok_research.mdc => competitor_research_template"
      data_mapping:
        project_name: "{{research_params.project_name}}"
        product_service: "{{research_params.product_service}}"
        research_period: "{{today}}"
        research_method: "Webæ¤œç´¢ã«ã‚ˆã‚‹äºŒæ¬¡èª¿æŸ»"
        research_themes: "{{research_params.research_focus | split: ','}}"
        competitor_overview: "{{analyzed_results.overview}}"
        competitor_strategies: "{{analyzed_results.strategies}}"
        market_position: "{{analyzed_results.market_position}}"
        swot_analysis: "{{analyzed_results.swot}}"
    - name: "notify_completion"
      action: "notify"
      message: |
        ç«¶åˆèª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        {{patterns.flow_date}}/draft_competitor_research.md
        
        Webæ¤œç´¢çµæœã‚’ã‚‚ã¨ã«ä¸»è¦ãªç«¶åˆæƒ…å ±ã¨å¸‚å ´å‹•å‘ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚
        å†…å®¹ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ç·¨é›†å¾Œã€ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

#--------------------------------------------
# Research: ç·åˆãƒ‡ã‚¹ã‚¯ãƒªã‚µãƒ¼ãƒ
#--------------------------------------------
- trigger: "(ãƒ‡ã‚¹ã‚¯ãƒªã‚µãƒ¼ãƒ|Desk Research)"
  priority: high
  steps:
    - name: "collect_research_requirements"
      action: "ask_questions"
      questions:
        - key: "project_name"
          question: "èª¿æŸ»å¯¾è±¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          required: true
        - key: "research_scope"
          question: "èª¿æŸ»ã®ç¯„å›²ã‚’é¸æŠã—ã¦ãã ã•ã„"
          options:
            - "å¸‚å ´ãƒ»æ¥­ç•Œå‹•å‘"
            - "é¡§å®¢å‹•å‘"
            - "ç«¶åˆåˆ†æ"
            - "æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰"
            - "è¦åˆ¶ãƒ»æ³•å¾‹å‹•å‘"
            - "ãã®ä»–"
          multi_select: true
          required: true
        - key: "specific_topics"
          question: "å…·ä½“çš„ã«èª¿æŸ»ã—ãŸã„å†…å®¹ã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"
          required: true
        - key: "industry_context"
          question: "æ¥­ç•Œã‚„å¯¾è±¡å¸‚å ´ã®èƒŒæ™¯æƒ…å ±ãŒã‚ã‚Œã°å…¥åŠ›ã—ã¦ãã ã•ã„"
          required: false
      store_as: "research_params"
    - name: "confirm_research"
      action: "confirm"
      message: "ä»¥ä¸‹ã®å†…å®¹ã§ãƒ‡ã‚¹ã‚¯ãƒªã‚µãƒ¼ãƒã‚’å®Ÿæ–½ã—ã¾ã™ï¼š\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {{research_params.project_name}}\nèª¿æŸ»ç¯„å›²: {{research_params.research_scope}}\nèª¿æŸ»ãƒˆãƒ”ãƒƒã‚¯: {{research_params.specific_topics}}\n\nWebæ¤œç´¢ã‚’é–‹å§‹ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - name: "web_research_market_industry"
      action: "web_search"
      search_term: "{{research_params.specific_topics}} {{research_params.industry_context}} å¸‚å ´è¦æ¨¡ æ¥­ç•Œå‹•å‘ æœ€æ–°ãƒ‡ãƒ¼ã‚¿"
      explanation: "å¸‚å ´ãƒ»æ¥­ç•Œå‹•å‘ã«é–¢ã™ã‚‹æœ€æ–°æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      condition: "research_params.research_scope.includes('å¸‚å ´ãƒ»æ¥­ç•Œå‹•å‘')"
      store_as: "market_data"
    - name: "web_research_customer"
      action: "web_search"
      search_term: "{{research_params.specific_topics}} é¡§å®¢å‹•å‘ æ¶ˆè²»è€…ãƒˆãƒ¬ãƒ³ãƒ‰ è³¼è²·è¡Œå‹• {{research_params.industry_context}}"
      explanation: "é¡§å®¢å‹•å‘ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      condition: "research_params.research_scope.includes('é¡§å®¢å‹•å‘')"
      store_as: "customer_data"
    - name: "web_research_competitors"
      action: "web_search"
      search_term: "{{research_params.specific_topics}} ç«¶åˆåˆ†æ ä¸»è¦ä¼æ¥­ æ¯”è¼ƒ {{research_params.industry_context}}"
      explanation: "ç«¶åˆåˆ†æã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      condition: "research_params.research_scope.includes('ç«¶åˆåˆ†æ')"
      store_as: "competitors_data"
    - name: "web_research_technology"
      action: "web_search"
      search_term: "{{research_params.specific_topics}} æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ æœ€æ–°æŠ€è¡“ ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ {{research_params.industry_context}}"
      explanation: "æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      condition: "research_params.research_scope.includes('æŠ€è¡“ãƒˆãƒ¬ãƒ³ãƒ‰')"
      store_as: "technology_data"
    - name: "web_research_regulation"
      action: "web_search"
      search_term: "{{research_params.specific_topics}} è¦åˆ¶ æ³•å¾‹ ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ æœ€æ–° {{research_params.industry_context}}"
      explanation: "è¦åˆ¶ãƒ»æ³•å¾‹å‹•å‘ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      condition: "research_params.research_scope.includes('è¦åˆ¶ãƒ»æ³•å¾‹å‹•å‘')"
      store_as: "regulation_data"
    - name: "web_research_other"
      action: "web_search"
      search_term: "{{research_params.specific_topics}} {{research_params.industry_context}} æœ€æ–°"
      explanation: "ãã®ä»–ã®ç‰¹å®šãƒˆãƒ”ãƒƒã‚¯ã«é–¢ã™ã‚‹æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      condition: "research_params.research_scope.includes('ãã®ä»–')"
      store_as: "other_data"
    - name: "analyze_web_research"
      action: "analyze"
      data: ["{{market_data}}", "{{customer_data}}", "{{competitors_data}}", "{{technology_data}}", "{{regulation_data}}", "{{other_data}}"]
      instructions: "åé›†ã—ãŸWebæ¤œç´¢ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€ä¸»è¦ãªæ´å¯Ÿã€ãƒˆãƒ¬ãƒ³ãƒ‰ã€çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã—ã¾ã™"
      store_as: "analyzed_results"
    - name: "create_draft"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/draft_desk_research.md"
      template_reference: "basic/02_pmbok_research.mdc => desk_research_template"
      data_mapping:
        project_name: "{{research_params.project_name}}"
        research_period: "{{today}}"
        research_method: "Webæ¤œç´¢ã«ã‚ˆã‚‹äºŒæ¬¡èª¿æŸ»"
        research_scope: "{{research_params.research_scope | join: ', '}}"
        specific_topics: "{{research_params.specific_topics}}"
        market_overview: "{{analyzed_results.market_overview}}"
        customer_insights: "{{analyzed_results.customer_insights}}"
        competitor_analysis: "{{analyzed_results.competitor_analysis}}"
        technology_trends: "{{analyzed_results.technology_trends}}"
        regulatory_environment: "{{analyzed_results.regulatory_environment}}"
        key_findings: "{{analyzed_results.key_findings}}"
    - name: "notify_completion"
      action: "notify"
      message: |
        ãƒ‡ã‚¹ã‚¯ãƒªã‚µãƒ¼ãƒãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        {{patterns.flow_date}}/draft_desk_research.md
        
        Webæ¤œç´¢çµæœã‚’ã‚‚ã¨ã«å„ãƒˆãƒ”ãƒƒã‚¯ã®ä¸»è¦æƒ…å ±ã¨æ´å¯Ÿã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚
        å†…å®¹ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ç·¨é›†å¾Œã€ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

#--------------------------------------------
# Research: å¸‚å ´è¦æ¨¡æ¨å®š
#--------------------------------------------
- trigger: "(å¸‚å ´è¦æ¨¡æ¨å®š|TAM SAM SOM|ãƒ•ã‚§ãƒ«ãƒŸæ¨å®š|Market Size Estimation)"
  priority: high
  steps:
    - name: "collect_research_requirements"
      action: "ask_questions"
      questions:
        - key: "project_name"
          question: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ/è£½å“/ã‚µãƒ¼ãƒ“ã‚¹åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          required: true
        - key: "business_description"
          question: "ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã‚„è£½å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦ã‚’ç°¡æ½”ã«èª¬æ˜ã—ã¦ãã ã•ã„"
          required: true
        - key: "target_customers"
          question: "ä¸»è¦ãªã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¡§å®¢ã‚’å…·ä½“çš„ã«æ•™ãˆã¦ãã ã•ã„"
          required: true
        - key: "geographic_scope"
          question: "å¯¾è±¡åœ°åŸŸï¼ˆå›½å†…/å›½éš›/ç‰¹å®šåœ°åŸŸãªã©ï¼‰ã‚’æŒ‡å®šã—ã¦ãã ã•ã„"
          required: true
        - key: "estimation_approach"
          question: "å¸‚å ´è¦æ¨¡æ¨å®šã®ä¸»ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é¸æŠã—ã¦ãã ã•ã„"
          options:
            - "ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼ˆå…¨ä½“å¸‚å ´ã‹ã‚‰çµã‚Šè¾¼ã‚€ï¼‰"
            - "ãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ï¼ˆå€‹åˆ¥è¦ç´ ã‹ã‚‰ç©ã¿ä¸Šã’ã‚‹ï¼‰"
            - "ãƒãƒªãƒ¥ãƒ¼ãƒã‚§ãƒ¼ãƒ³åˆ†æ"
          default: "ãƒœãƒˆãƒ ã‚¢ãƒƒãƒ—ï¼ˆå€‹åˆ¥è¦ç´ ã‹ã‚‰ç©ã¿ä¸Šã’ã‚‹ï¼‰"
          required: true
      store_as: "market_params"
    - name: "confirm_research"
      action: "confirm"
      message: "ä»¥ä¸‹ã®å†…å®¹ã§å¸‚å ´è¦æ¨¡æ¨å®šã‚’å®Ÿæ–½ã—ã¾ã™ï¼š\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {{market_params.project_name}}\nã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¡§å®¢: {{market_params.target_customers}}\nå¯¾è±¡åœ°åŸŸ: {{market_params.geographic_scope}}\næ¨å®šã‚¢ãƒ—ãƒ­ãƒ¼ãƒ: {{market_params.estimation_approach}}\n\nWebæ¤œç´¢ã‚’é–‹å§‹ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
    - name: "web_search_market_size"
      action: "web_search"
      search_term: "{{market_params.business_description}} {{market_params.target_customers}} å¸‚å ´è¦æ¨¡ TAM SAM SOM {{market_params.geographic_scope}}"
      explanation: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢é€£ã™ã‚‹å¸‚å ´è¦æ¨¡æƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "market_size_data"
    - name: "web_search_industry_data"
      action: "web_search"
      search_term: "{{market_params.business_description}} æ¥­ç•Œãƒ‡ãƒ¼ã‚¿ çµ±è¨ˆ å¹´é–“æˆé•·ç‡ å¸‚å ´äºˆæ¸¬ {{market_params.geographic_scope}}"
      explanation: "æ¥­ç•Œå…¨ä½“ã®ãƒ‡ãƒ¼ã‚¿ã¨çµ±è¨ˆæƒ…å ±ã‚’åé›†ã—ã¾ã™"
      store_as: "industry_data"
    - name: "web_search_customer_data"
      action: "web_search"
      search_term: "{{market_params.target_customers}} äººå£çµ±è¨ˆ æ¶ˆè²»è€…è¡Œå‹• è³¼è²·é »åº¦ å¹³å‡æ”¯å‡º {{market_params.geographic_scope}}"
      explanation: "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¡§å®¢ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¾ã™"
      store_as: "customer_data"
    - name: "web_search_specific_metrics"
      action: "web_search"
      search_term: "{{market_params.business_description}} ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ ãƒ‡ãƒ¼ã‚¿ æŒ‡æ¨™ {{market_params.estimation_approach == 'ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ï¼ˆå…¨ä½“å¸‚å ´ã‹ã‚‰çµã‚Šè¾¼ã‚€ï¼‰' ? 'å¸‚å ´ã‚·ã‚§ã‚¢ ç«¶åˆ' : 'å˜ä¾¡ åˆ©ç”¨ç‡ é »åº¦'}}"
      explanation: "é¸æŠã—ãŸæ¨å®šã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«åŸºã¥ãå…·ä½“çš„ãªæŒ‡æ¨™ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¾ã™"
      store_as: "metrics_data"
    - name: "analyze_web_research"
      action: "analyze"
      data: ["{{market_size_data}}", "{{industry_data}}", "{{customer_data}}", "{{metrics_data}}"]
      instructions: "åé›†ã—ãŸWebæ¤œç´¢ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€TAM/SAM/SOMã®æ¨å®šã«å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨æ•°å€¤ã‚’æŠ½å‡ºã—ã¾ã™ã€‚ã¾ãŸãƒ•ã‚§ãƒ«ãƒŸæ¨å®šã«ä½¿ç”¨ã§ãã‚‹è¦ç´ ã‚’æ•´ç†ã—ã¾ã™ã€‚"
      store_as: "analyzed_results"
    - name: "create_draft"
      action: "create_markdown_file"
      path: "{{patterns.flow_date}}/draft_market_size_estimation.md"
      template_reference: "02_pmbok_research.mdc => market_size_template"
      data_mapping:
        project_name: "{{market_params.project_name}}"
        business_description: "{{market_params.business_description}}"
        target_customers: "{{market_params.target_customers}}"
        geographic_scope: "{{market_params.geographic_scope}}"
        estimation_factors: "{{analyzed_results.estimation_factors}}"
        specific_data_points: "{{analyzed_results.specific_data_points}}"
        assumptions: "{{analyzed_results.assumptions}}"
        competitors_share: "{{analyzed_results.competitors_share}}"
    - name: "notify_completion"
      action: "notify"
      message: |
        å¸‚å ´è¦æ¨¡æ¨å®šãƒ¬ãƒãƒ¼ãƒˆã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
        {{patterns.flow_date}}/draft_market_size_estimation.md
        
        Webæ¤œç´¢çµæœã‚’ã‚‚ã¨ã«TAMã€SAMã€SOMã®å¸‚å ´è¦æ¨¡æ¨å®šã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚
        å†…å®¹ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ç·¨é›†å¾Œã€ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨Stockãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚



#-----
# 16. Developmentãƒ•ã‚§ãƒ¼ã‚º - å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º
#-----
  - trigger: "(é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º|Development|å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º)"
    priority: high
    steps:
      - message: |
          Developmentï¼ˆé–‹ç™ºå®Ÿè£…ï¼‰ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ä»¥ä¸‹ã®æˆæœç‰©ã‚’ä½œæˆã§ãã¾ã™ï¼š
          - **é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**ï¼šã€Œé–‹ç™ºç’°å¢ƒåˆæœŸåŒ–ã€ã¨å…¥åŠ›
          - **é–‹ç™ºè¨ˆç”»**ï¼šã€Œé–‹ç™ºè¨ˆç”»ä½œæˆã€ã¨å…¥åŠ›
          - **å®Ÿè£…é †åºè¨ˆç”»**ï¼šã€Œå®Ÿè£…é †åºè¨ˆç”»ã€ã¨å…¥åŠ›
          - **ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…**ï¼šã€Œã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ã€ã¨å…¥åŠ›
          - **è¨˜äº‹åŸ·ç­†**ï¼šã€Œè¨˜äº‹åŸ·ç­†ã€ã¨å…¥åŠ›
          - **æˆæœç‰©ç¢ºèª**ï¼šã€Œæˆæœç‰©ç¢ºèªã€ã¨å…¥åŠ›

#-----
# Development: é–‹ç™ºç’°å¢ƒåˆæœŸåŒ–
#-----
  - trigger: "(é–‹ç™ºç’°å¢ƒåˆæœŸåŒ–|DevelopmentåˆæœŸåŒ–|å®Ÿè£…ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/09_pmbok_development.mdc => development_init_questions"
        message: "ã€é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_dev_setup}}"
        template_reference: "basic/09_pmbok_development.mdc => development_init_template"
        message: "é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "setup_dev_folders"
        action: "execute_shell"
        command: "mkdir -p {{patterns.dev_root}}/{code,articles,assets}"
        message: "é–‹ç™ºç”¨ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¦ã„ã¾ã™..."
      - name: "notify_completion"
        action: "notify"
        message: |
          é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ã¾ã—ãŸã€‚
          
          ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: {{patterns.draft_dev_setup}}
          é–‹ç™ºãƒ•ã‚©ãƒ«ãƒ€: {{patterns.dev_root}}
          
          æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
          1. ã€Œé–‹ç™ºè¨ˆç”»ä½œæˆã€ã¨å…¥åŠ›ã—ã¦é–‹ç™ºè¨ˆç”»ã‚’ä½œæˆ
          2. ã€Œå®Ÿè£…é †åºè¨ˆç”»ã€ã¨å…¥åŠ›ã—ã¦å®Ÿè£…é †åºã‚’æ±ºå®š
          3. ã€Œã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ã€ã¨å…¥åŠ›ã—ã¦å€‹åˆ¥ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®å®Ÿè£…ã‚’é–‹å§‹

#-----
# Development: é–‹ç™ºè¨ˆç”»ä½œæˆ
#-----
  - trigger: "(é–‹ç™ºè¨ˆç”»ä½œæˆ|Developmentè¨ˆç”»|å®Ÿè£…è¨ˆç”»)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/09_pmbok_development.mdc => development_planning_questions"
        message: "ã€é–‹ç™ºè¨ˆç”»ã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§é–‹ç™ºè¨ˆç”»ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_dev_plan}}"
        template_reference: "basic/09_pmbok_development.mdc => development_planning_template"
        message: "é–‹ç™ºè¨ˆç”»ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "notify_completion"
        action: "notify"
        message: |
          é–‹ç™ºè¨ˆç”»ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
          {{patterns.draft_dev_plan}}
          
          æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
          1. ã€Œå®Ÿè£…é †åºè¨ˆç”»ã€ã¨å…¥åŠ›ã—ã¦è©³ç´°ãªå®Ÿè£…é †åºã‚’æ±ºå®š
          2. ã€Œã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ã€ã¨å…¥åŠ›ã—ã¦å€‹åˆ¥ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®å®Ÿè£…ã‚’é–‹å§‹

#-----
# Development: å®Ÿè£…é †åºè¨ˆç”»
#-----
  - trigger: "(å®Ÿè£…é †åºè¨ˆç”»|é–‹ç™ºé †åº|ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä¾å­˜é–¢ä¿‚|å®Ÿè£…é †åºæ±ºå®š)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/09_pmbok_development.mdc => implementation_order_questions"
        message: "ã€å®Ÿè£…é †åºè¨ˆç”»ã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§å®Ÿè£…é †åºè¨ˆç”»ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.flow_dev_dir}}/draft_implementation_order.md"
        template_reference: "basic/09_pmbok_development.mdc => implementation_order_template"
        message: "å®Ÿè£…é †åºè¨ˆç”»ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "notify_completion"
        action: "notify"
        message: |
          å®Ÿè£…é †åºè¨ˆç”»ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
          {{patterns.flow_dev_dir}}/draft_implementation_order.md
          
          ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®ä¾å­˜é–¢ä¿‚ã‚’åˆ†æã—ã€æœ€é©ãªå®Ÿè£…é †åºã‚’æ±ºå®šã—ã¾ã—ãŸã€‚
          æ¬¡ã¯ã€Œã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ã€ã¨å…¥åŠ›ã—ã¦ã€å€‹åˆ¥ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®å®Ÿè£…ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚

#-----
# Development: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…
#-----
  - trigger: "(ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…|å®Ÿè£…é–‹å§‹|ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/09_pmbok_development.mdc => story_implementation_questions"
        message: "ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…ã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…è¨ˆç”»ã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_dev_story}}"
        template_reference: "basic/09_pmbok_development.mdc => story_implementation_template"
        message: "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…è¨ˆç”»ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "notify_completion"
        action: "notify"
        message: |
          ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å®Ÿè£…è¨ˆç”»ã®ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
          {{patterns.draft_dev_story}}
          
          å®Ÿè£…å®Œäº†å¾Œã¯ã€Œæˆæœç‰©ç¢ºèªã€ã¨å…¥åŠ›ã—ã¦ã€æˆæœç‰©ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ç¢ºå®šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

#-----
# Development: è¨˜äº‹åŸ·ç­†
#-----
  - trigger: "(è¨˜äº‹åŸ·ç­†|ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ|è¨˜äº‹ä½œæˆ)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/09_pmbok_development.mdc => article_writing_questions"
        message: "ã€è¨˜äº‹åŸ·ç­†ã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§è¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.draft_dev_article}}"
        template_reference: "basic/09_pmbok_development.mdc => article_writing_template"
        message: "è¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "notify_completion"
        action: "notify"
        message: |
          è¨˜äº‹ãƒ‰ãƒ©ãƒ•ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
          {{patterns.draft_dev_article}}
          
          è¨˜äº‹ã®åŸ·ç­†ã‚’é€²ã‚ã€å®Œäº†å¾Œã¯ã€Œæˆæœç‰©ç¢ºèªã€ã¨å…¥åŠ›ã—ã¦ç¢ºå®šæ‰‹ç¶šãã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

#-----
# Development: æˆæœç‰©ç¢ºèª
#-----
  - trigger: "(æˆæœç‰©ç¢ºèª|å®Ÿè£…ç¢ºèª|ç¢ºå®šãƒ¬ãƒ“ãƒ¥ãƒ¼)"
    priority: high
    steps:
      - name: "start_info_collection"
        action: "call basic/09_pmbok_development.mdc => development_review_questions"
        message: "ã€æˆæœç‰©ç¢ºèªã€‘ã«å¿…è¦ãªæƒ…å ±ã‚’åé›†ã—ã¾ã™ã€‚ä»¥ä¸‹ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚"
      - name: "wait_user_responses"
        action: "wait_for_all_answers"
        message: "å¿…è¦ãªå›ç­”ãŒæƒã†ã¾ã§å…ˆã«é€²ã¿ã¾ã›ã‚“ã€‚"
      - name: "confirm_document_creation"
        action: "confirm"
        message: "åé›†ã—ãŸæƒ…å ±ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"
      - name: "create_draft"
        action: "create_markdown_file"
        path: "{{patterns.flow_dev_dir}}/draft_development_review.md"
        template_reference: "basic/09_pmbok_development.mdc => development_review_template"
        message: "ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
      - name: "notify_completion"
        action: "notify"
        message: |
          æˆæœç‰©ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸï¼š
          {{patterns.flow_dev_dir}}/draft_development_review.md
          
          æˆæœç‰©ã®ç¢ºèªãŒå®Œäº†ã—ãŸã‚‰ã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã¨å…¥åŠ›ã—ã¦ã€
          Flow â†’ Stock ã¸ã®ç§»å‹•ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚


