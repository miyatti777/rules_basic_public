---
description: ã€Œäºˆå®šç¢ºèªã€æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ãƒ»é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç”Ÿæˆã—ã€å®Œäº†ã‚¿ã‚¹ã‚¯ã‚’ WBS ã‚„ãƒªã‚¹ã‚¯ãƒ­ã‚°ã¸åŒæœŸã™ã‚‹ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ«ãƒ¼ãƒ«ã€
globs: 
alwaysApply: false
---
# =========================
# 07_task_management.mdc
# =========================
path_reference: "pmbok_paths.mdc"

# =========================
# AIæ³¨æ„äº‹é … - AIãŒå¿…ãšå®ˆã‚‹ã¹ããƒ«ãƒ¼ãƒ«
# =========================
ai_instructions:
  - "å„ãƒ«ãƒ¼ãƒ«ã®ãƒˆãƒªã‚¬ãƒ¼ã‚„ã‚¹ãƒ†ãƒƒãƒ—ã‚’å¿…ãšæ­£ç¢ºã«å®Ÿè¡Œã™ã‚‹ã“ã¨ - ç‹¬è‡ªã®å‡¦ç†ã¯ä¸€åˆ‡è¿½åŠ ã—ãªã„ã“ã¨"
  - "execute_shellã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä¸€åˆ‡å¤‰æ›´ã›ãšãã®ã¾ã¾å®Ÿè¡Œã™ã‚‹ã“ã¨"
  - "ç‹¬è‡ªã®è§£é‡ˆã‚’åŠ ãˆãšã€ãƒ«ãƒ¼ãƒ«ã«è¨˜è¼‰ã•ã‚ŒãŸé€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãã®ã¾ã¾ä½¿ç”¨ã™ã‚‹ã“ã¨"
  - "ãƒ«ãƒ¼ãƒ«ãŒå®Ÿè¡Œã§ããªã„å ´åˆã¯ã€ãã®æ—¨ã‚’å ±å‘Šã—å‹æ‰‹ã«ä»£æ›¿æ‰‹æ®µã‚’å–ã‚‰ãªã„ã“ã¨"
  - "ã€é‡è¦ã€‘ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼äºˆå®šç¢ºèªï¼ˆä»Šæ—¥ã®äºˆå®šç¢ºèª/ä»Šæ—¥ã®äºˆå®š/ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç¢ºèª/Calendar eventsï¼‰ã§ã¯ã€ä½™è¨ˆãªå‡¦ç†ã‚’è¿½åŠ ã›ãšå¿…ãšã€Œ./scripts/get_calendar_events.shã€ã ã‘ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨"
  - "ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã‚’è‡ªåˆ†ã§è€ƒãˆã¦ä½œæˆã›ãšã€ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ç”Ÿæˆã™ã‚‹ã“ã¨"
  - "ãƒ«ãƒ¼ãƒ«ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„å‡¦ç†ã¯çµ¶å¯¾ã«å®Ÿè¡Œã—ãªã„ã“ã¨"



# =========================
# 3. Routines YAML Template - ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
# =========================
routines_yaml_template: |
  # ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {{project_name}}
  # ä½œæˆæ—¥: {{today}}
  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
  
  project: "{{project_name}}"
  program: "{{program_name}}"
  description: "{{project_name}}ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©"
  created_date: "{{today}}"
  version: "1.0"
  
  # ãƒ«ãƒ¼ãƒãƒ³å®šç¾©
  routines:
    # {{routine1_title}}
    - routine_id: "RT-001"
      title: "{{routine1_title}}"
      description: "{{routine1_description}}"
      frequency: "{{routine1_frequency}}"
      {{#routine1_day_of_week}}
      day_of_week: "{{routine1_day_of_week}}"
      {{/routine1_day_of_week}}
      priority: "high"
      total_estimate: {{task1_estimate|add:task2_estimate}}
      tasks:
        - task_id: "T-001"
          title: "{{task1_title}}"
          description: "{{task1_description}}"
          estimate: {{task1_estimate}}
          priority: "high"
          assignee: "{{task1_assignee}}"
        
        - task_id: "T-002"
          title: "{{task2_title}}"
          description: "{{task2_description}}"
          estimate: {{task2_estimate}}
          priority: "medium"
          assignee: "{{task2_assignee}}"
    
    {{#routine2_title}}
    # {{routine2_title}}
    - routine_id: "RT-002"
      title: "{{routine2_title}}"
      description: "{{routine2_description}}"
      frequency: "{{routine2_frequency}}"
      priority: "medium"
      total_estimate: {{task3_estimate|add:task4_estimate}}
      tasks:
        {{#task3_title}}
        - task_id: "T-101"
          title: "{{task3_title}}"
          description: "{{task3_description}}"
          estimate: {{task3_estimate}}
          priority: "medium"
          assignee: "{{task3_assignee}}"
        {{/task3_title}}
        
        {{#task4_title}}
        - task_id: "T-102"
          title: "{{task4_title}}"
          description: "{{task4_description}}"
          estimate: {{task4_estimate}}
          priority: "low"
          assignee: "{{task4_assignee}}"
        {{/task4_title}}
    {{/routine2_title}}
  
  # é »åº¦å®šç¾©
  frequencies:
    - name: "daily"
      description: "æ¯æ—¥å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "weekly"
      description: "æ¯é€±å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "monthly"
      description: "æ¯æœˆå®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "quarterly"
      description: "å››åŠæœŸã”ã¨ã«å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "yearly"
      description: "å¹´ã«ä¸€åº¦å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
  
  # å„ªå…ˆåº¦å®šç¾©
  priorities:
    - name: "high"
      description: "é«˜å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯"
    - name: "medium"
      description: "ä¸­ç¨‹åº¦ã®å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯"
    - name: "low"
      description: "ä½å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯"

# =========================
# 4. Routines Questions - ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©è³ªå•
# =========================
routines_questions:
  - key: "project_name"
    question: "ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: true
  - key: "program_name"
    question: "ãƒ—ãƒ­ã‚°ãƒ©ãƒ åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: true
  - key: "routine1_title"
    question: "æœ€åˆã®ãƒ«ãƒ¼ãƒãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    description: "ä¾‹: æœã®ãƒ«ãƒ¼ãƒãƒ³ã€é€±æ¬¡æŒ¯ã‚Šè¿”ã‚Šãªã©"
    required: true
  - key: "routine1_description"
    question: "ã“ã®ãƒ«ãƒ¼ãƒãƒ³ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: false
  - key: "routine1_frequency"
    question: "ã“ã®ãƒ«ãƒ¼ãƒãƒ³ã®é »åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„"
    options:
      - "daily"
      - "weekly"
      - "monthly"
      - "quarterly"
      - "yearly"
    default: "daily"
    required: true
  - key: "routine1_day_of_week"
    question: "é€±æ¬¡ã®å ´åˆã€æ›œæ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„"
    options:
      - "monday"
      - "tuesday"
      - "wednesday"
      - "thursday"
      - "friday"
      - "saturday"
      - "sunday"
    default: "monday"
    condition: "routine1_frequency == 'weekly'"
  - key: "task1_title"
    question: "æœ€åˆã®ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: true
  - key: "task1_description"
    question: "æœ€åˆã®ã‚¿ã‚¹ã‚¯ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: false
  - key: "task1_estimate"
    question: "æœ€åˆã®ã‚¿ã‚¹ã‚¯ã®è¦‹ç©æ™‚é–“ï¼ˆåˆ†ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    type: "number"
    default: 15
  - key: "task2_title"
    question: "2ã¤ç›®ã®ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: true
  - key: "task2_description"
    question: "2ã¤ç›®ã®ã‚¿ã‚¹ã‚¯ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    required: false
  - key: "task2_estimate"
    question: "2ã¤ç›®ã®ã‚¿ã‚¹ã‚¯ã®è¦‹ç©æ™‚é–“ï¼ˆåˆ†ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    type: "number"
    default: 15
  - key: "routine2_title"
    question: "2ã¤ç›®ã®ãƒ«ãƒ¼ãƒãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰"
    required: false
  - key: "routine2_description"
    question: "2ã¤ç›®ã®ãƒ«ãƒ¼ãƒãƒ³ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    condition: "routine2_title"
    required: false
  - key: "routine2_frequency"
    question: "2ã¤ç›®ã®ãƒ«ãƒ¼ãƒãƒ³ã®é »åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„"
    options:
      - "daily"
      - "weekly"
      - "monthly"
      - "quarterly"
      - "yearly"
    default: "weekly"
    condition: "routine2_title"
  - key: "task3_title"
    question: "2ã¤ç›®ã®ãƒ«ãƒ¼ãƒãƒ³ã®æœ€åˆã®ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    condition: "routine2_title"
    required: false
  - key: "task3_description"
    question: "ã‚¿ã‚¹ã‚¯ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    condition: "task3_title"
    required: false
  - key: "task3_estimate"
    question: "ã‚¿ã‚¹ã‚¯ã®è¦‹ç©æ™‚é–“ï¼ˆåˆ†ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    type: "number"
    default: 30
    condition: "task3_title"
  - key: "task4_title"
    question: "2ã¤ç›®ã®ãƒ«ãƒ¼ãƒãƒ³ã®2ã¤ç›®ã®ã‚¿ã‚¹ã‚¯ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰"
    condition: "routine2_title"
    required: false
  - key: "task4_description"
    question: "ã‚¿ã‚¹ã‚¯ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    condition: "task4_title"
    required: false
  - key: "task4_estimate"
    question: "ã‚¿ã‚¹ã‚¯ã®è¦‹ç©æ™‚é–“ï¼ˆåˆ†ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    type: "number"
    default: 30
    condition: "task4_title"

# =========================
# 4. Weekly Review (é‡‘æ›œ 17 : 30)
# =========================
weekly_review:
  trigger:
    - pattern: "(é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼|Weekly review)"
    - time: "é‡‘ 17:30"
  steps:
    - aggregate_week:
        flow_glob: "{{dirs.flow}}/{{iso_week}}*/daily_tasks.md"
        store_as: week_data
    - create_markdown_file:
        path: "{{patterns.weekly_md}}"
        template_path: "{{patterns.weekly_template}}"
        variables:
          week_data: "{{week_data}}"
          iso_week: "{{iso_week}}"
    - sync_progress:
        source: "{{week_data.completed}}"
        wbs_glob: "{{patterns.wbs_glob}}"
        risk_glob: "{{dirs.stock}}/projects/*/documents/3_planning/risk_log.md"
    - notify:
        message: |
          ğŸ“’ é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç”Ÿæˆã—ã¾ã—ãŸ â†’ {{patterns.weekly_md}}
          ç¢ºèªå¾Œã€Œç¢ºå®šåæ˜ ã—ã¦ã€ã§ Stock ã«ç§»å‹•ã—ã¾ã™

# =========================
# 5. Sync Command (æ‰‹å‹•)
# =========================
sync_with_artifacts:
  trigger:
    - pattern: "(Sync|WBSã¨åŒæœŸ|ãƒªã‚¹ã‚¯ãƒ­ã‚°ã¨åŒæœŸ)"
  steps:
    - parse_daily:
        file: "{{patterns.daily_md}}"
        store_as: done_today
    - sync_wbs:
        completed: "{{done_today}}"
        wbs_glob: "{{patterns.wbs_glob}}"
    - sync_risk_log:
        completed: "{{done_today}}"
        risk_glob: "{{dirs.stock}}/projects/*/documents/3_planning/risk_log.md"
    - notify:
        message: "WBS / ãƒªã‚¹ã‚¯ãƒ­ã‚°ã¸åŒæœŸã—ã¾ã—ãŸ âœ…"

# =========================
# 6. ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©ã®ãŸã‚ã®è³ªå•
# =========================
routines_questions:
  questions:
    - key: "program_id"
      question: "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆãƒ—ãƒ­ãƒ€ã‚¯ãƒˆï¼‰IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
      required: true
    - key: "project_id"
      question: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
      required: true
    - key: "routine_name"
      question: "ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚¿ã‚¹ã‚¯ã‚»ãƒƒãƒˆã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šæœã®ä½œæ¥­ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ï¼‰"
      required: true
    - key: "routine_description"
      question: "ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚¿ã‚¹ã‚¯ã‚»ãƒƒãƒˆã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
      required: true
    - key: "routine_tasks"
      question: "ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚¿ã‚¹ã‚¯ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šãƒ¡ãƒ¼ãƒ«ç¢ºèª,ã‚¿ã‚¹ã‚¯æ•´ç†,ä¼šè­°æº–å‚™ï¼‰"
      required: true
    - key: "task_estimates"
      question: "å„ã‚¿ã‚¹ã‚¯ã®æ‰€è¦æ™‚é–“ã‚’åˆ†å˜ä½ã§ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ã‚¿ã‚¹ã‚¯ã¨åŒã˜é †åºã§æŒ‡å®šã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼š5,10,15ï¼‰"
      required: true
    - key: "task_priorities"
      question: "å„ã‚¿ã‚¹ã‚¯ã®å„ªå…ˆåº¦ã‚’0ï¼ˆæœ€é«˜ï¼‰ï½3ï¼ˆä½ï¼‰ã§ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ã‚¿ã‚¹ã‚¯ã¨åŒã˜é †åºã§æŒ‡å®šã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼š0,1,2ï¼‰"
      required: true
    - key: "frequency"
      question: "ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã®é »åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„"
      options: ["daily", "weekly", "monthly"]
      required: true

# =========================
# 7. Routines YAML Template - ãƒ«ãƒ¼ãƒãƒ³YAMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
# =========================
routines_yaml_template: |
  # ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
  # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: {{project_name}}
  # ä½œæˆæ—¥: {{today}}
  # ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
  
  project: "{{project_name}}"
  program: "{{program_name}}"
  description: "{{project_name}}ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯å®šç¾©"
  created_date: "{{today}}"
  version: "1.0"
  
  # ãƒ«ãƒ¼ãƒãƒ³å®šç¾©
  routines:
    # {{routine1_title}}
    - routine_id: "RT-001"
      title: "{{routine1_title}}"
      description: "{{routine1_description}}"
      frequency: "{{routine1_frequency}}"
      {{#routine1_day_of_week}}
      day_of_week: "{{routine1_day_of_week}}"
      {{/routine1_day_of_week}}
      priority: "high"
      total_estimate: {{task1_estimate|add:task2_estimate}}
      tasks:
        - task_id: "T-001"
          title: "{{task1_title}}"
          description: "{{task1_description}}"
          estimate: {{task1_estimate}}
          priority: "high"
          assignee: "{{task1_assignee}}"
        
        - task_id: "T-002"
          title: "{{task2_title}}"
          description: "{{task2_description}}"
          estimate: {{task2_estimate}}
          priority: "medium"
          assignee: "{{task2_assignee}}"
    
    {{#routine2_title}}
    # {{routine2_title}}
    - routine_id: "RT-002"
      title: "{{routine2_title}}"
      description: "{{routine2_description}}"
      frequency: "{{routine2_frequency}}"
      priority: "medium"
      total_estimate: {{task3_estimate|add:task4_estimate}}
      tasks:
        {{#task3_title}}
        - task_id: "T-101"
          title: "{{task3_title}}"
          description: "{{task3_description}}"
          estimate: {{task3_estimate}}
          priority: "medium"
          assignee: "{{task3_assignee}}"
        {{/task3_title}}
        
        {{#task4_title}}
        - task_id: "T-102"
          title: "{{task4_title}}"
          description: "{{task4_description}}"
          estimate: {{task4_estimate}}
          priority: "low"
          assignee: "{{task4_assignee}}"
        {{/task4_title}}
    {{/routine2_title}}
  
  # é »åº¦å®šç¾©
  frequencies:
    - name: "daily"
      description: "æ¯æ—¥å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "weekly"
      description: "æ¯é€±å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "monthly"
      description: "æ¯æœˆå®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "quarterly"
      description: "å››åŠæœŸã”ã¨ã«å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
    - name: "yearly"
      description: "å¹´ã«ä¸€åº¦å®Ÿè¡Œã™ã‚‹ãƒ«ãƒ¼ãƒãƒ³"
  
  # å„ªå…ˆåº¦å®šç¾©
  priorities:
    - name: "high"
      description: "é«˜å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯"
    - name: "medium"
      description: "ä¸­ç¨‹åº¦ã®å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯"
    - name: "low"
      description: "ä½å„ªå…ˆåº¦ã®ã‚¿ã‚¹ã‚¯"

# =========================
# 8. Daily Routine Template - æ—¥æ¬¡ãƒ«ãƒ¼ãƒãƒ³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
# =========================
daily_routine_template: |
  # æ—¥æ¬¡ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ - {{date}}
  
  ## ğŸŒ… {{routine1_title}}
  - [ ] {{task1_title}} ({{task1_estimate}}åˆ†)
  - [ ] {{task2_title}} ({{task2_estimate}}åˆ†)
  
  {{#routine2_title}}
  ## ğŸ“‹ {{routine2_title}}
  - [ ] {{task3_title}} ({{task3_estimate}}åˆ†)
  - [ ] {{task4_title}} ({{task4_estimate}}åˆ†)
  {{/routine2_title}}
  
  ## ğŸ“ å‚™è€ƒ
  - 

# =========================
# 9. Generate Daily Tasks Script - æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# =========================
generate_daily_tasks_script: |
  #!/usr/bin/env python3
  # -*- coding: utf-8 -*-
  """
  æ—¥æ¬¡ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  
  routines.yamlã‹ã‚‰æ—¥æ¬¡ã€é€±æ¬¡ã€æœˆæ¬¡ã®ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã‚’æŠ½å‡ºã—ã€
  daily_routine_template.mdãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
  """
  
  import os
  import sys
  import yaml
  import datetime
  import argparse
  from pathlib import Path
  
  def get_today_date():
      """ä»Šæ—¥ã®æ—¥ä»˜ã‚’å–å¾—"""
      return datetime.datetime.now().date()
  
  def load_routines_yaml(file_path):
      """ãƒ«ãƒ¼ãƒãƒ³YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€"""
      try:
          with open(file_path, 'r', encoding='utf-8') as f:
              return yaml.safe_load(f)
      except Exception as e:
          print(f"ãƒ«ãƒ¼ãƒãƒ³ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: {e}")
          return None
  
  def filter_routines_for_today(routines_data, today_date):
      """ä»Šæ—¥å®Ÿè¡Œã™ã¹ããƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"""
      if not routines_data or 'routines' not in routines_data:
          return []
      
      weekday = today_date.weekday()  # 0=æœˆæ›œ, 1=ç«æ›œ, ..., 6=æ—¥æ›œ
      weekday_names = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"]
      today_weekday = weekday_names[weekday]
      
      today_routines = []
      
      for routine in routines_data['routines']:
          frequency = routine.get('frequency', '').lower()
          day_of_week = routine.get('day_of_week', '').lower()
          day_of_month = routine.get('day_of_month')
          
          # æ—¥æ¬¡ã‚¿ã‚¹ã‚¯
          if frequency == 'daily':
              today_routines.append(routine)
          # é€±æ¬¡ã‚¿ã‚¹ã‚¯ï¼ˆæŒ‡å®šã•ã‚ŒãŸæ›œæ—¥ï¼‰
          elif frequency == 'weekly' and day_of_week == today_weekday:
              today_routines.append(routine)
          # æœˆæ¬¡ã‚¿ã‚¹ã‚¯ï¼ˆæŒ‡å®šã•ã‚ŒãŸæ—¥ä»˜ï¼‰
          elif frequency == 'monthly' and day_of_month and str(day_of_month) == str(today_date.day):
              today_routines.append(routine)
      
      return today_routines
  
  def generate_task_markdown(routines, template_path, output_path, today_date):
      """ã‚¿ã‚¹ã‚¯ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’ç”Ÿæˆ"""
      try:
          # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã‚€
          with open(template_path, 'r', encoding='utf-8') as f:
              template = f.read()
          
          # ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã”ã¨ã«ç½®æ›
          for i, routine in enumerate(routines):
              title = routine.get('title', f'ãƒ«ãƒ¼ãƒãƒ³ {i+1}')
              tasks = routine.get('tasks', [])
              
              # ã‚¿ã‚¹ã‚¯ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’ä½œæˆ
              tasks_md = ""
              for task in tasks:
                  task_title = task.get('title', 'ã‚¿ã‚¹ã‚¯')
                  estimate = task.get('estimate', '')
                  tasks_md += f"- [ ] {task_title}"
                  if estimate:
                      tasks_md += f" ({estimate}åˆ†)"
                  tasks_md += "\n"
              
              # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚¿ã‚¹ã‚¯ã‚’æŒ¿å…¥
              marker = f"## ğŸ“‹ {title}"
              if marker in template:
                  template = template.replace(f"{marker}\n", f"{marker}\n{tasks_md}")
          
          # æ—¥ä»˜æƒ…å ±ã‚’ç½®æ›
          date_str = today_date.strftime("%Y-%m-%d")
          template = template.replace("{{date}}", date_str)
          
          # ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿
          os.makedirs(os.path.dirname(output_path), exist_ok=True)
          with open(output_path, 'w', encoding='utf-8') as f:
              f.write(template)
          
          print(f"æ—¥æ¬¡ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã—ã¾ã—ãŸ: {output_path}")
          return True
      except Exception as e:
          print(f"ã‚¿ã‚¹ã‚¯ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
          return False
  
  def main():
      parser = argparse.ArgumentParser(description='ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã‹ã‚‰æ—¥æ¬¡ã‚¿ã‚¹ã‚¯ã‚’ç”Ÿæˆ')
      parser.add_argument('--routines', '-r', help='ãƒ«ãƒ¼ãƒãƒ³å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹', default='routines.yaml')
      parser.add_argument('--template', '-t', help='ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹', default='templates/daily_routine_template.md')
      parser.add_argument('--output', '-o', help='å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹', default='daily_tasks.md')
      parser.add_argument('--date', '-d', help='å¯¾è±¡æ—¥ä»˜ (YYYY-MM-DDå½¢å¼ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ä»Šæ—¥)')
      args = parser.parse_args()
      
      # æ—¥ä»˜ã®å–å¾—
      if args.date:
          try:
              today_date = datetime.datetime.strptime(args.date, "%Y-%m-%d").date()
          except ValueError:
              print(f"ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªæ—¥ä»˜å½¢å¼ã§ã™: {args.date}")
              return 1
      else:
          today_date = get_today_date()
      
      # ãƒ«ãƒ¼ãƒãƒ³å®šç¾©ã‚’èª­ã¿è¾¼ã‚€
      routines_data = load_routines_yaml(args.routines)
      if not routines_data:
          print("ãƒ«ãƒ¼ãƒãƒ³å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")
          return 1
      
      # ä»Šæ—¥ã®ãƒ«ãƒ¼ãƒãƒ³ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
      today_routines = filter_routines_for_today(routines_data, today_date)
      print(f"{len(today_routines)} ä»¶ã®ãƒ«ãƒ¼ãƒãƒ³ãŒæœ¬æ—¥å®Ÿè¡Œã™ã¹ãã‚¿ã‚¹ã‚¯ã¨ã—ã¦è¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚")
      
      # ã‚¿ã‚¹ã‚¯ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’ç”Ÿæˆ
      success = generate_task_markdown(today_routines, args.template, args.output, today_date)
      
      if success:
          print("ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚")
          return 0
      else:
          print("ãƒ«ãƒ¼ãƒãƒ³ã‚¿ã‚¹ã‚¯ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚")
          return 1
  
  if __name__ == "__main__":
      sys.exit(main())
